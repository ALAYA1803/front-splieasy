<div class="sidebar-container">
  <!-- Encabezado -->
  <div class="sidebar-header p-3">
    <div class="brand-container flex align-items-center">
      <img src="assets/images/logo.png" alt="SplitEasy Logo" class="logo-img">
      <div class="brand-info ml-3">
        <span class="app-name">
          <span class="app-name-split">Split</span><span class="app-name-easy">Easy</span>
        </span>
        <span class="app-tagline">Divide y vencerás</span>
      </div>
    </div>
  </div>

  <!-- Menú de navegación -->
  <div class="sidebar-content">
    <div class="nav-section">
      <div class="nav-header p-3">
        <span class="nav-title">Navegación</span>
      </div>
      <ul class="sidebar-nav list-none p-0 m-0">
        <li *ngFor="let item of items; trackBy: trackByRoute" class="nav-item">
          <a [routerLink]="item.route"
             routerLinkActive="active-route"
             class="nav-link p-3 flex align-items-center"
             [attr.aria-label]="item.label">
            <div class="nav-icon-container">
              <i [class]="item.icon + ' nav-icon'"></i>
            </div>
            <span class="nav-label ml-3">{{ item.label }}</span>
            <div class="nav-indicator"></div>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav-separator"></div>
  </div>

  <!-- Footer: Perfil + Logout -->
  <div class="sidebar-footer p-3">
    <div class="user-profile-card p-3 mb-3"
         role="button"
         tabindex="0"
         (click)="openSettings()"
         (keydown.enter)="openSettings()"
         aria-label="Abrir configuración de usuario">
      <div class="user-profile flex align-items-center">
        <div class="avatar-container">
          <p-avatar [label]="user?.username?.charAt(0)?.toUpperCase() || 'U'"
                    shape="circle"
                    styleClass="user-avatar bg-primary-500 text-white">
          </p-avatar>
          <div class="avatar-status online"></div>
        </div>
        <div class="user-info ml-3 flex-1">
          <div class="user-name font-bold text-sm">{{ user?.username || 'Usuario' }}</div>
          <div class="user-email text-xs text-color-secondary">{{ user?.email || 'usuario@ejemplo.com' }}</div>
          <div class="user-role text-xs">{{ user?.roles?.[0] || 'Miembro' }}</div>
        </div>
      </div>
    </div>

    <!-- Botón de logout -->
    <button (click)="logout()"
            class="logout-button p-3 flex align-items-center justify-content-center w-full"
            [disabled]="loggingOut"
            aria-label="Cerrar sesión">
      <div class="logout-content flex align-items-center">
        <i class="pi"
           [ngClass]="{
             'pi-sign-out': !loggingOut,
             'pi-spinner': loggingOut,
             'pi-spin': loggingOut,
             'logout-icon': true
           }"></i>
        <span class="logout-text ml-3">
          {{ loggingOut ? 'Cerrando...' : 'Cerrar Sesión' }}
        </span>
      </div>
      <div class="logout-ripple"></div>
    </button>
  </div>
</div>
